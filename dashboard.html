<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Food Rescue PH</title>
		<link rel = "stylesheet" href = "css/dashboard.css">
		<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
		<link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
		<script src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" charset="utf-8"></script>

	</head>
	<body>

		<!-----Side Bar----->

		<div class = "header">
			<div class = "menu-btn">
				<img class = "menu-logo" src="images/menu.png">
			</div>
			<div class = "logout-btn">
				<img class = "logout-logo" src="images/logout.png">
				<p style="float: right; padding: 5px; font-size: 15px;">Log out</p>
			</div>
		</div>

		<div class = "side-bar">
			<div class = "close-btn">
				<i class="fas fa-times"></i>
			</div>
			<div class = "menu">
				<img class = "logo_img" src = "images/foodph.png" >
				<div class = "item"><a href="dashboard.html"><img class = "side-logo" src="images/dashboard.png">Dasboard</a></div>
				<div class = "item"><a href="reports.html"><img class = "side-logo" src="images/reports.png">Reports</a></div>
				<div class = "item"><a href="chats.html"><img class = "side-logo" src="images/chats.png">Chats</a></div>
				<div class = "item"><a href="donation_status.html"><img class = "side-logo" src="images/status.png">Donation Status</a></div>
				<div class = "item"><a href="edit_contents.html"><img class = "side-logo" src="images/announcement.png">Edit Contents</a></div>
				<div class = "item"><a href="donors.html"><img class = "side-logo" src="images/donors.png">Donors</a></div>
			</div>
		</div>

		<!-----Side Bar----->

		<!-----Dashboard Content----->
		<h1>DASHBOARD</h1>

		<div class= "db-container">
			<div class="table-container-1">
				<div class="row-1">
					<div class="label"><b>Total No. Verified Donors</b></div>
					<div class="line"></div>
					<input type="text" id="output1" class="total">
				</div>

					<button type="button" id="submit" class="btn">Get</button>

				<div class="row-2">
					<div class="label"><b>Total No. of Confirmed Donations</b></div>
					<div class="line"></div>
					<div id="output2" class="total"></div>
				</div>
			</div>

			<div class="table-container-2">
				<div class="row-1">
					<div class="label"><b>Total No. of Pending Donors</b></div>
					<div class="line"></div>
					<div id="output3" class="total"></div>
				</div>

				<div class="row-2">
					<div class="label"><b>Total No. of Pending Donations</b></div>
					<div class="line"></div>
					<div id="output4" class="total"></div>
				</div>
			</div>
		</div>

		
		<!-----Dashboard Content----->


		<!-----Expand/Collapse Sidebar----->

		<script type="text/javascript">
			$(document).ready(function(){
				$('.menu-btn').click(function(){
					$('.side-bar').addClass('active');
				});

				$('.close-btn').click(function(){
					$('.side-bar').removeClass('active');
				});
			});
		</script>

		<!-----Expand/Collapse Sidebar----->
		
		<!-----FIREBASE----->

		<script type="module">
			// Import the functions you need from the SDKs you need
			import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
			import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js";
			import { getDatabase, ref, get, query, onValue } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";
			// TODO: Add SDKs for Firebase products that you want to use
			// https://firebase.google.com/docs/web/setup#available-libraries
		  
			// Your web app's Firebase configuration
			// For Firebase JS SDK v7.20.0 and later, measurementId is optional
			const firebaseConfig = {
			  apiKey: "AIzaSyCfwQ5G2TPE4gZqEHPtvRv1Ew1o3M-ndP4",
			  authDomain: "byete-hunger-application.firebaseapp.com",
			  databaseURL: "https://byete-hunger-application-default-rtdb.firebaseio.com",
			  projectId: "byete-hunger-application",
			  storageBucket: "byete-hunger-application.appspot.com",
			  messagingSenderId: "791717154010",
			  appId: "1:791717154010:web:d49d5dc2cb908a7ae5e9e3",
			  measurementId: "G-KE1ZL9NVFG"
			};
		  
			// Initialize Firebase
			const app = initializeApp(firebaseConfig);
			const analytics = getAnalytics(app);
			const database = getDatabase(app);

			document.getElementById('submit').onclick = function(){
				
				const dbRef = ref(database, 'Users');

				/*--onValue(dbRef,(snapshot) => {

					var output1 = snapshot.numChildren();
					document.getElementById('output1').value = output1;
				}); --*/

				/*--onValue(dbRef, (snapshot) => {
					const data = snapshot.val()
					const lenML = data.length - 1
					console.log(lenML)
				}) --*/

				const query = query(ref, orderByChild('status'), equalTo('Pending'));
				get(query).then((results) => {
				console.log(Object.keys(results.val()).length);
				results.forEach((snapshot) => {
					console.log(snapshot.key, snapshot.val());
				});
			});
			}

		</script>
	
		<!-----FIREBASE----->
	</body>
</html>